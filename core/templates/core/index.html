<!--
  Andromeda — Immersive landing (single-file copy-paste)

  WHAT THIS FILE DOES / IMPORTANT NOTES (30-50 lines):
  1) Removes the old "star-cards" grid and replaces it with an immersive continuation
     under the hero: starfield canvas + halo layer + person.svg + star.svg + quick-capture.
  2) Assets expected (relative to this HTML file):
      - assets/person.svg   (avatar, facing camera)
      - assets/star.svg     (star/thought icon)
      - assets/halo.svg     (transparent halo graphic; optional — this file will be used if present)
  3) Halo behavior:
      - Controlled by CSS variable --halo-opacity (initial 0.35).
      - On scroll: updated to 0.35 + 0.65 * min(scrollY/220, 1) (so it reaches 1.0 at ~220px).
      - On CTA click/pulse: temporary "pop" class toggled for a scale/transform pulse.
      - The halo is a separate DOM node (img#haloSvg) so you can swap it with your own PNG/SVG.
  4) Star and person are separate DOM nodes:
      - the star can be animated independently (you can add animations inside star.svg or via CSS/JS).
  5) Visual constraints preserved:
      - Warm paper background #efe0d0.
      - White block UI only for CTAs + Quick-capture card.
      - Header (search/login/signup) remains unchanged.
  6) Accessibility:
      - Images include alt text and aria-labels.
      - Quick-capture area is role="region" and focusable by keyboard.
  7) Tech:
      - Tailwind CDN used (no build step).
      - Small inline JS — no external dependencies.
  8) How to use in Django:
      - Add `{% load static %}` at the top, put assets under `static/assets/` and replace `src="assets/..."` with `{% static 'assets/...' %}`.
  9) Acceptance checklist (quick):
      - No cards grid remains.
      - Star + person loaded from assets.
      - Halo brightens on scroll, pulses on CTA.
      - Quick-capture is white block and remains.
      - Page is runnable in browser.
  10) If you want the halo visually generated by CSS (instead of your halo.svg), delete the <img id="haloSvg"> and set the #haloLayer styles in the script (comment shows how).

  END OF COMMENT BLOCK
-->

<!doctype html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Andromeda — Second Brain</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --page-bg: #efe0d0;
        --accent-hover: #f28a2e;
        --button-bg: var(--page-bg);
        --text-color: #000;
        --halo-opacity: 0.35;
        --base-font-size: 18px;
      }

      html { font-size: var(--base-font-size); }
      body {
        background: var(--page-bg) !important;
        color: var(--text-color) !important;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
        -webkit-font-smoothing:antialiased;
        -moz-osx-font-smoothing:grayscale;
      }

      /* top navigation */
      .top-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 1rem;
        max-width: 1200px;
        margin: 0 auto 1rem auto;
        background: #ffffff; /* white rectangle */
        border: 2px solid #2b2b2b; /* match panel-border */
      }

  .nav-left { display: flex; align-items: center; gap: 1rem; }
  .nav-left .nav-link { color: var(--text-color); text-decoration: none; font-weight: 700; }
  .nav-left .nav-title { color: var(--text-color); font-weight: 700; margin-right: 1rem; }
  .nav-left .nav-logo { order: -1; margin-right: 0.5rem; }

      .nav-right { display: flex; align-items: center; gap: 0.5rem; }
      .nav-btn {
        display: inline-block;
        padding: 0.5rem 0.75rem;
        text-decoration: none;
        color: var(--text-color);
        background: var(--button-bg);
        border: 2px solid transparent;
        font-weight: 700;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .nav-btn:hover {
        background: var(--accent-hover);
        color: #fff;
        border-color: var(--accent-hover);
      }
      .nav-btn.primary {
        background: var(--accent-hover);
        color: #fff;
        border-color: var(--accent-hover);
      }
  .nav-logo { width: 80px; height: auto; display: inline-block; }

      /* basic typography size increases */
      p, li, label, input, textarea, button, a { font-size: 1.125rem; color: var(--text-color) !important; }
      h1 { font-size: 3rem; color: var(--text-color) !important; }
      h2 { font-size: 2.25rem; color: var(--text-color) !important; }

      /* button style: block-level, no rounded corners */
      .btn, .btn-login, .btn-primary, button {
        display: block !important;
        width: 100%;
        background: var(--button-bg) !important;
        color: var(--text-color) !important;
        border-radius: 0 !important;
        border: none !important;
        padding: 0.75rem 1rem !important;
        text-align: center;
        font-weight: 700;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .btn:hover, .btn:focus, button:hover {
        background: var(--accent-hover) !important;
        color: #ffffff !important;
      }

      /* white block for Quick-capture and any intentional white UI */
      .white-block { background: #ffffff; }

      /* global panels: remove rounding */
      .panel-border { border-radius: 0; border: 2px solid #2b2b2b; }

      /* halo wrapper positioning */
      .halo-wrapper {
        position: absolute;
        top: 65%;
        left: 50%;
        transform: translate(-50%, 0);
        width: 500px;
        height: 500px;
        z-index: 1;
        pointer-events: none;
      }

      .halo-layer-1, .halo-layer-2, .halo-layer-3 {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border-radius: 50%;
        transition: transform 0.5s ease;
      }

      .halo-layer-1.pop, .halo-layer-2.pop, .halo-layer-3.pop { transform: translate(-50%, -50%) scale(1.04); }

      .halo-layer-1 {
        width: 280px;
        height: 280px;
        background: radial-gradient(circle, rgba(242, 138, 46, 0.3) 0%, rgba(242, 138, 46, 0.08) 50%, transparent 80%);
        filter: blur(30px);
        animation: pulse1 4s ease-in-out infinite;
      }

      .halo-layer-2 {
        width: 350px;
        height: 350px;
        background: radial-gradient(circle, rgba(255, 107, 107, 0.2) 0%, rgba(255, 107, 107, 0.04) 50%, transparent 80%);
        filter: blur(40px);
        animation: pulse2 5s ease-in-out infinite;
      }

      .halo-layer-3 {
        width: 420px;
        height: 420px;
        background: radial-gradient(circle, rgba(78, 205, 196, 0.15) 0%, rgba(78, 205, 196, 0.02) 50%, transparent 80%);
        filter: blur(50px);
        animation: pulse3 6s ease-in-out infinite;
      }

      /* person container */
      .person-container {
        position: relative;
        text-align: center;
        margin: 1rem auto 0 auto; /* reduced top margin again to 1rem */
        z-index: 5;
        width: 200px; /* fix container width so avatar is truly centered */
        transform: translateY(-40px); /* keep upward nudge */
      }

      .person-avatar {
        width: 200px;
        height: auto;
        display: block;
        margin: 0 auto; /* ensure the img itself centers inside the fixed-width container */
        filter: drop-shadow(0 0 25px rgba(242, 138, 46, 0.3));
        animation: float 4s ease-in-out infinite;
      }

      /* star container */
      .star-container {
        position: absolute;
        top: -30px; /* slightly above the avatar */
        left: 50%;
        transform: translate(-50%, 0); /* center horizontally over avatar */
        z-index: 6;
        pointer-events: none;
      }

      .star-icon {
        width: 144px; /* reduced by 20% from 180px */
        height: 144px;
        filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.6));
        animation: starGlow 3s ease-in-out infinite;
      }

      /* content section */
      .content-section {
        position: relative;
        z-index: 4;
        max-width: 800px;
        margin: 0 auto;
        padding-top: 38px; /* halved again from 75px */
        text-align: center;
      }

      .hero-headline {
        font-size: 3.5rem;
        font-weight: 300;
        color: #000000;
        margin-bottom: 1.5rem;
        line-height: 1.3;  /* added to prevent overlapping when wrapped */
      }

      .hero-headline strong {
        font-weight: 900;
        color: #000000;
      }

      .subheadline {
        font-size: 1.5rem;
        color: #000000;
        margin-bottom: 1rem;
        font-weight: 400;
        line-height: 1.4; /* added for better readability */
      }

      .description {
        font-size: 1.125rem;
        color: #000000;
        margin-bottom: 2rem;
        line-height: 1.5; /* added for comfortable paragraph spacing */
      }

      /* CTA buttons */
      .cta-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-bottom: 3rem;
      }

      .btn-blocky {
        border-radius: 0;
        padding: 14px 28px;
        font-weight: 600;
        border: 2px solid;
        transition: all 200ms ease;
        cursor: pointer;
        font-size: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .btn-blocky:hover {
        transform: scale(1.02);
      }

      .btn-primary {
        background: #f28a2e;
        color: white;
        border-color: #f28a2e;
      }

      .btn-secondary {
        background: transparent;
        color: white;
        border-color: white;
      }

      /* capture card */
      .capture-card {
        background: white;
        color: #333;
        border: 2px solid #2b2b2b;
        border-radius: 0;
        padding: 1.5rem;
        max-width: 600px;
        margin: 2.5rem auto 2rem auto; /* reduced top margin from 5rem to 2.5rem */
      }

      .capture-label {
        display: block;
        font-size: 1rem;
        margin-bottom: 0.5rem;
        color: #666;
      }

      .capture-textarea {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid #ccc;
        border-radius: 0;
        resize: none;
        font-family: inherit;
        font-size: 1rem;
        margin-bottom: 1rem;
      }

      .button-group {
        display: flex;
        justify-content: flex-end;
        gap: 0.5rem;
      }

      .btn-cancel {
        background: #f5f5f5;
        color: #666;
        border-color: #ccc;
        padding: 10px 20px;
      }

      .btn-save {
        background: #f28a2e;
        color: white;
        border-color: #f28a2e;
        padding: 10px 20px;
      }

      /* animations */
      @keyframes pulse1 {
        0%, 100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 0.5;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.08);
          opacity: 0.7;
        }
      }

      @keyframes pulse2 {
        0%, 100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 0.4;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.08);
          opacity: 0.6;
        }
      }

      @keyframes pulse3 {
        0%, 100% {
          transform: translate(-50%, -50%) scale(1);
          opacity: 0.3;
        }
        50% {
          transform: translate(-50%, -50%) scale(1.08);
          opacity: 0.5;
        }
      }

      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-15px); }
      }

      @keyframes starGlow {
        0%, 100% {
          transform: scale(1) rotate(0deg);
          filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.6));
        }
        50% {
          transform: scale(1.1) rotate(5deg);
          filter: drop-shadow(0 0 25px rgba(255, 215, 0, 0.8));
        }
      }

      /* responsive */
      @media (max-width: 768px) {
        .hero-headline { 
          font-size: 2rem;
          line-height: 1.3; /* ensure mobile wrapping has sufficient spacing */
        }
        .cta-buttons { flex-direction: column; align-items: center; }
        .person-avatar { width: 140px; height: auto; }
  .person-container { width: 140px; transform: translateY(-16px); }
        .halo-wrapper { width: 300px; height: 300px; top: 60%; }
        .halo-layer-1 { width: 168px; height: 168px; }
        .halo-layer-2 { width: 210px; height: 210px; }
        .halo-layer-3 { width: 252px; height: 252px; }
  .star-icon { width: 100px; height: 100px; }
    .nav-logo { width: 60px; }
    .content-section { padding-top: 40px; }
      }
    </style>
  </head>

  <body class="antialiased text-sm">
    <div class="max-w-[1200px] mx-auto p-4">
      <!-- Top navigation -->
      <nav class="top-nav" role="navigation" aria-label="Main navigation">
        <div class="nav-left">
          <img src="{% static 'assets/logo2.png' %}" alt="Andromeda logo" class="nav-logo" />
          <span class="nav-title">Andromeda</span>
          <a href="#about" class="nav-link">About us</a>
        </div>
        <div class="nav-right">
          <a href="{% url 'login' %}" class="nav-btn">Login</a>
          <a href="{% url 'core:signup' %}" class="nav-btn primary">Sign up</a>
          <!-- logo moved to left -->
        </div>
      </nav>

      <!-- === IMMERSIVE LAYER === -->
      <section class="py-12">
        <div class="max-w-[1200px] mx-auto p-6">
          <div class="relative overflow-hidden bg-white p-8 min-h-[800px] border-2 border-[#2b2b2b]" aria-hidden="false">

            <!-- CSS-based halo system -->
            <div class="halo-wrapper">
              <div class="halo-layer-1"></div>
              <div class="halo-layer-2"></div>
              <div class="halo-layer-3"></div>
            </div>

            <!-- Content section -->
            <div class="content-section">
              <h1 class="hero-headline">Turn your <strong>STARS</strong> into galaxies</h1>
              <p class="subheadline">Turn small ideas into lasting insight</p>
              <p class="description">Capture thoughts. Link them. Let Andromeda help your ideas glow.</p>

              <div class="cta-buttons">
                <button class="btn-blocky btn-primary">Start for free</button>
                <button class="btn-blocky btn-secondary">Learn more</button>
              </div>

              <!-- Person avatar centered -->
              <div class="person-container">
                <img id="personSvg" src="{% static 'assets/person.svg' %}" alt="Andromeda avatar" class="person-avatar" aria-label="Andromeda avatar" />
                <!-- Star icon positioned relative to person -->
                <div class="star-container">
                  <img src="{% static 'assets/star.svg' %}" alt="Star" class="star-icon" />
                </div>
              </div>

              <!-- Quick capture card -->
              <div class="capture-card">
                <label class="capture-label">Quick capture</label>
                <textarea class="capture-textarea" placeholder="Capture a thought..." rows="3"></textarea>
                <div class="button-group">
                  <button class="btn-blocky btn-cancel">Cancel</button>
                  <button class="btn-blocky btn-save">Save</button>
                </div>
              </div>
            </div>

          </div>
        </div>
      </section>
      <!-- === END IMMERSIVE LAYER === -->

    </div>

    <script>
      (function(){
        // set CSS var
        function setHaloVar(val) { document.documentElement.style.setProperty('--halo-opacity', (val).toFixed(2)); }

        // try fallback loader for images (works with static paths)
        function tryLoadImage(elId, candidates){
          const el = document.getElementById(elId);
          if(!el) return;
          let i = 0;
          function next(){
            if(i >= candidates.length) { el.style.display='none'; return; }
            const url = candidates[i++];
            const img = new Image();
            img.onload = function(){ el.src = url; el.style.display = 'block'; };
            img.onerror = next;
            img.src = url;
          }
          next();
        }

        // You likely use Django's static; if not, pass plain "assets/..." paths.
        tryLoadImage('personSvg', ['{% static "assets/person.svg" %}', 'assets/person.svg']);

        // halo on scroll
        function onScroll(){
          const max = 220;
          const y = Math.min(window.scrollY, max);
          const ratio = y / max;
          const val = 0.35 + (0.65 * ratio);
          setHaloVar(val);
          const haloLayers = document.querySelectorAll('.halo-layer-1, .halo-layer-2, .halo-layer-3');
          haloLayers.forEach(layer => layer.style.opacity = val.toFixed(2));
        }
        window.addEventListener('scroll', onScroll, { passive: true });

        // pulse halo on any button or link clicks
        document.addEventListener('click', function(e){
          if(e.target.matches('a, button')){
            const haloLayers = document.querySelectorAll('.halo-layer-1, .halo-layer-2, .halo-layer-3');
            haloLayers.forEach(layer => {
              layer.classList.add('pop');
              setTimeout(()=>layer.classList.remove('pop'),520);
            });
          }
        }, false);

        // initialize opacity var
        setHaloVar(0.35);
      })();
    </script>
  </body>
</html>
